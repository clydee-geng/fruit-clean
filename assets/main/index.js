System.register("chunks:///_virtual/Block.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){"use strict";var t,n,e,o,r,s,u,a,c,l,p,h,f,d;return{setters:[function(i){t=i.applyDecoratedDescriptor,n=i.inheritsLoose,e=i.initializerDefineProperty,o=i.assertThisInitialized},function(i){r=i.cclegacy,s=i._decorator,u=i.Node,a=i.SpriteFrame,c=i.Sprite,l=i.Vec3,p=i.tween,h=i.UITransform,f=i.Rect,d=i.Component}],execute:function(){var v,y,b,Y,g,k,m,B,S;r._RF.push({},"77143Xll6JB+raD8CFaaEjd","Block",void 0);var T=s.ccclass,w=s.property;i("Block",(v=T("Block"),y=w({type:u}),b=w({type:[a]}),Y=w({type:c}),v((m=t((k=function(i){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t=i.call.apply(i,[this].concat(r))||this,e(t,"nodeYinYin",m,o(t)),t.canTouch=void 0,e(t,"spfYuanSu",B,o(t)),e(t,"spYuanSu",S,o(t)),t.blockType=void 0,t.isBottom=void 0,t.blockIndex=void 0,t.isClearing=void 0,t.isMoving=void 0,t.lastPosi=void 0,t}n(t,i);var r=t.prototype;return r.init=function(i){var t;this.blockType=i,this.canTouch=!0,this.isBottom=!1,this.spYuanSu.spriteFrame=null==(t=this.spfYuanSu)?void 0:t[this.blockType]},r.initBottom=function(i){var t;this.lastPosi=new l(0,0,0),this.isMoving=!0,this.isClearing=!1,this.blockIndex=-1,this.blockType=i,this.canTouch=!1,this.isBottom=!0,this.nodeYinYin.active=!1,this.spYuanSu.spriteFrame=null==(t=this.spfYuanSu)?void 0:t[this.blockType]},r.refresh=function(i){var t=this;console.log("üöÄ ~ file: Block.ts:36 ~ Block ~ refresh ~ type:",i),this.blockType=i,p(this.spYuanSu.node).to(.1,{scale:new l(0,0,0)}).call((function(){var i;t.spYuanSu.spriteFrame=null==(i=t.spfYuanSu)?void 0:i[t.blockType]})).to(.1,{scale:new l(.7,.7,.7)}).start()},r.start=function(){},r.update=function(i){},r.setTouch=function(i){this.canTouch=i,this.nodeYinYin.active=!i},r.myGetBoundingBox=function(){var i=this.node.getComponent(h).getBoundingBox();return new f(i.x+10,i.y+10,i.width-20,i.height-20)},t}(d)).prototype,"nodeYinYin",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(k.prototype,"spfYuanSu",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=t(k.prototype,"spYuanSu",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=k))||g));r._RF.pop()}}}));

System.register("chunks:///_virtual/game.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Block.ts","./gameData.ts"],(function(t){"use strict";var o,e,n,i,r,s,a,l,c,h,u,m,p,g,v,d,f,b,k,B,C;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Node,l=t.Prefab,c=t.Label,h=t.AudioClip,u=t.UITransform,m=t.tween,p=t.instantiate,g=t.Vec3,v=t.Vec2,d=t.AudioSource,f=t.input,b=t.Input,k=t.Component},function(t){B=t.Block},function(t){C=t.gameData}],execute:function(){var y,T,S,w,D,A,I,x,L,J,N,F,M,O,P,E,z,R,X;r._RF.push({},"9357e1pGVBFXqypudjHb1EP","game",void 0);var _=s.ccclass,H=s.property;t("game",(y=_("game"),T=H({type:a}),S=H({type:l}),w=H({type:a}),D=H({type:c}),A=H({type:[c]}),I=H({type:a}),x=H({type:a}),L=H({type:[h]}),y((F=o((N=function(t){function o(){for(var o,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return o=t.call.apply(t,[this].concat(r))||this,n(o,"preBlocks",F,i(o)),n(o,"preBlock",M,i(o)),n(o,"blocksBottom",O,i(o)),n(o,"levelLabel",P,i(o)),n(o,"arrLabelDJ",E,i(o)),n(o,"layerOver",z,i(o)),n(o,"toast",R,i(o)),n(o,"arrAudio",X,i(o)),o.curTouchStartNum=void 0,o.curTouchEndNum=void 0,o.gameData=void 0,o.numLevel=void 0,o.bottomX=void 0,o.moveOutY=void 0,o.gameStatus=void 0,o.numDJArr=void 0,o.audioSource=void 0,o}e(o,t);var r=o.prototype;return r.refreshLevel=function(){this.levelLabel.string="Á¨¨"+(this.numLevel+1)+"ÂÖ≥"},r.callBackBtn=function(t,o){if(console.log(o),"btn3"===o){if(this.numDJArr[2]<=0)return void this.showToast("ËØ•ÈÅìÂÖ∑Êï∞Èáè‰∏∫0");this.numDJArr[2]--,this.btn3Fn(),this.refreshDJNum()}else if("btn1"===o){if(this.numDJArr[0]<=0)return void this.showToast("ËØ•ÈÅìÂÖ∑Êï∞Èáè‰∏∫0");this.numDJArr[0]--,this.moveBlock(),this.refreshDJNum()}else if("btn2"===o){if(this.numDJArr[1]<=0)return void this.showToast("ËØ•ÈÅìÂÖ∑Êï∞Èáè‰∏∫0");this.numDJArr[1]--,this.recallFn(),this.refreshDJNum()}else if("btn_cw"===o)this.numLevel=0,this.init();else if("btn_fh"===o){if(this.numDJArr[3]<=0)return void this.showToast("ËØ•ÈÅìÂÖ∑Êï∞Èáè‰∏∫0");this.numDJArr[3]--,this.refreshDJNum(),this.fhFn()}},r.fhFn=function(){this.layerOver.active=!1,this.gameStatus=0,this.moveBlock()},r.recallFn=function(){for(var t=this,o=this.blocksBottom.children,e=-1,n=o.length-1;n>=0;n--){if(!o[n].getComponent(B).isClearing){e=n;break}}var i=-1;if(-1!==e){var r=o[e].getComponent(B);i=r.blockIndex,r.isClearing=!0;var s=r.lastPosi,a=this.blocksBottom.getComponent(u).convertToWorldSpaceAR(s),l=this.preBlocks.getComponent(u).convertToNodeSpaceAR(a);m(o[e]).to(.1,{position:s}).call((function(){var o=p(t.preBlock);t.preBlocks.addChild(o),o.setPosition(l),o.getComponent(B).init(r.blockType),t.isTwoBlockIntersect()})).removeSelf().start()}-1===i&&(this.numDJArr[1]++,this.showToast("ÂΩìÂâç‰∏çÂèØÁî®ËØ•ÈÅìÂÖ∑"));for(var c=this.blocksBottom.children,h=0;h<c.length;h++){var v=c[h].getComponent(B);if(!v.isClearing&&(v.blockIndex>i&&-1!==i)){v.blockIndex-=1;var d=this.bottomX+86*v.blockIndex;m(o[h]).to(.1,{position:new g(d,0,0)}).start()}}},r.moveBlock=function(){for(var t=this,o=[],e=this.blocksBottom.children,n=0;n<e.length;n++){var i=e[n].getComponent(B);i.blockIndex<3&&!i.isClearing&&o.push(e[n])}var r=o.length,s=Math.floor(100*Math.random());0==r&&(this.numDJArr[0]++,this.showToast("ÂΩìÂâç‰∏çÂèØÁî®ËØ•ÈÅìÂÖ∑"));for(var a=function(e){var n=o[e].getComponent(B);n.isClearing=!0;var i=new g(80*n.blockIndex-80,t.moveOutY+s,0),r=t.blocksBottom.getComponent(u).convertToWorldSpaceAR(i),a=t.preBlocks.getComponent(u).convertToNodeSpaceAR(r);m(o[e]).to(.1,{position:i}).call((function(){var o=p(t.preBlock);t.preBlocks.addChild(o),o.setPosition(a),o.getComponent(B).init(n.blockType),t.isTwoBlockIntersect()})).removeSelf().start()},l=o.length-1;l>=0;l--)a(l);for(var c=this.blocksBottom.children,h=0;h<c.length;h++){var v=c[h].getComponent(B);if(!v.isClearing){v.blockIndex-=r;var d=this.bottomX+86*v.blockIndex;m(e[h]).to(.1,{position:new g(d,0,0)}).start()}}},r.btn3Fn=function(){for(var t=this.preBlocks.children,o=0;o<t.length;o++){var e=t[o].getComponent(B),n=t[Math.floor(Math.random()*t.length)].getComponent(B),i=e.blockType;e.refresh(n.blockType),n.refresh(i)}},r.isBottomBlockMoving=function(){var t=!1,o=this.blocksBottom.children;o.length>0&&(t=o[o.length-1].getComponent(B).isMoving);return t},r.touchStartFn=function(t){var o=this;this.isBottomBlockMoving()||0===this.gameStatus&&(this.curTouchStartNum=-1,this.touchFn("start",t,(function(t,e){o.audioSource.playOneShot(o.arrAudio[0],1),o.curTouchStartNum=e,m(t).to(.1,{scale:new g(1.5,1.5,1.5)}).start()})))},r.touchEndFn=function(t){var o=this;this.isBottomBlockMoving()||0===this.gameStatus&&this.touchFn("end",t,(function(t,e){if(o.curTouchEndNum=e,o.curTouchStartNum===o.curTouchEndNum){console.log("Êåâ‰∏ãÔºåÊä¨Ëµ∑ÊòØÂú®Âêå‰∏Ä‰∏™Âùó‰∏ä,Âà†Èô§ÊîπÂùó"),t.removeFromParent();var n=t.getComponent(B);o.createBlocksForBottom(n.blockType,t.getPosition()),o.isTwoBlockIntersect()}}))},r.touchFn=function(t,o,e){var n=this,i=o.getUILocation(),r=this.preBlocks.getComponent(u).convertToNodeSpaceAR(new g(i.x,i.y,0)),s=new v(r.x,r.y),a=this.preBlocks.children;console.log("üöÄ ~ file: game.ts:92 ~ game ~ touchFn ~ children:",a);for(var l=a.length-1;l>=0;l--){var c=a[l];if(console.log("item=======>",c),c.getComponent(B).canTouch){var h=c.getComponent(u).getBoundingBox();if(console.log("üöÄ ~ 100",t,s,h,h.contains(s)),h.contains(s)){e(c,l);break}}}"end"===t&&(-1!==this.curTouchStartNum&&m(a[this.curTouchStartNum]).to(.1,{scale:new g(1,1,1)}).start(),0===this.preBlocks.children.length&&(console.log("Ê∏∏ÊàèÈÄöÂÖ≥‰∫Ü"),this.audioSource.playOneShot(this.arrAudio[3],1),this.showToast("ÊÅ≠ÂñúÈÄöÂÖ≥ÔºÅÔºÅÔºÅ"),this.numLevel+=1,this.gameStatus=1,this.scheduleOnce((function(){n.init()}),1)))},r.createBlocks=function(){var t=this,o=10+this.numLevel>30?30:this.numLevel+10;this.gameData.arrTypeyLevel[this.numLevel]&&(o=this.gameData.arrTypeyLevel[this.numLevel]);var e=-1,n=Math.floor(Math.random()*o);if(this.gameData.arrPosLevel[this.numLevel])this.gameData.arrPosLevel[this.numLevel].forEach((function(i,r){e++;var s=p(t.preBlock),a=i.x,l=i.y;s.setPosition(a,l,0),t.preBlocks.addChild(s);var c=s.getComponent(B);e%3==0&&(n=Math.floor(Math.random()*o)),c.init(n)}));else for(var i=99+6*this.numLevel,r=0;r<i;r++){e++;var s=p(this.preBlock),a=500*Math.random()-250,l=500*Math.random()-105;s.setPosition(a,l,0),this.preBlocks.addChild(s);var c=s.getComponent(B);e%3==0&&(n=Math.floor(Math.random()*o)),c.init(n)}},r.createBlocksForBottom=function(t,o){var e=this,n=p(this.preBlock);this.blocksBottom.addChild(n);var i=n.getComponent(B);i.initBottom(t);var r=this.preBlocks.getComponent(u).convertToWorldSpaceAR(o),s=this.blocksBottom.getComponent(u).convertToNodeSpaceAR(r);n.setPosition(s),i.lastPosi=s;var a=this.getBlockBottomIndex(),l=this.bottomX+86*a;this.refreshBlockBottom(n),m(n).to(.1,{position:new g(l,0,0)}).call((function(){e.isCanClear(n)})).start()},r.getBlockBottomIndex=function(){for(var t=this.blocksBottom.children,o=t[t.length-1].getComponent(B),e=0,n=0;n<t.length;n++){t[n].getComponent(B).isClearing&&e++}o.blockIndex=t.length-1-e;for(var i=t.length-2;i>=0;i--){var r=t[i].getComponent(B);if(o.blockType===r.blockType&&!1===r.isClearing){o.blockIndex=r.blockIndex+1;break}}return o.blockIndex},r.refreshBlockBottom=function(t){for(var o=t.getComponent(B).blockIndex,e=this.blocksBottom.children,n=0;n<e.length;n++){var i=e[n].getComponent(B);if(t.uuid!==e[n].uuid&&!i.isClearing&&i.blockIndex>=o){i.blockIndex+=1;var r=this.bottomX+86*i.blockIndex;m(e[n]).to(.1,{position:new g(r,0,0)}).start()}}},r.isCanClear=function(t){var o=t.getComponent(B);o.isMoving=!1;for(var e=o.blockIndex,n=this.blocksBottom.children,i=[],r=0;r<n.length;r++){var s=n[r].getComponent(B);o.blockType!==s.blockType||s.isClearing||i.push(n[r])}if(3===i.length){for(var a=i.length-1;a>=0;a--){i[a].getComponent(B).isClearing=!0,m(i[a]).delay(.05).to(.05,{scale:new g(0,0,0)}).removeSelf().start(),this.audioSource.playOneShot(this.arrAudio[1],1)}for(var l=this.blocksBottom.children,c=0;c<l.length;c++){var h=l[c].getComponent(B);if(h.blockIndex>e){h.blockIndex-=3;var u=this.bottomX+86*h.blockIndex;m(l[c]).delay(.05).to(.05,{position:new g(u,0,0)}).start()}}}for(var p=0,v=this.blocksBottom.children,d=0;d<v.length;d++){v[d].getComponent(B).isClearing&&(p+=1)}v.length-p>=7&&(console.log("Ê∏∏ÊàèÂ§±Ë¥•"),this.audioSource.playOneShot(this.arrAudio[2],1),this.gameStatus=-1,this.layerOver.active=!0)},r.isTwoBlockIntersect=function(){var t=this.preBlocks.children;t.forEach((function(o,e){var n=o.getComponent(B),i=n.myGetBoundingBox();n.setTouch(!0);for(var r=e+1;r<t.length;r++){var s=t[r].getComponent(B).myGetBoundingBox();if(i.intersects(s)){n.setTouch(!1);break}}}))},r.refreshDJNum=function(){console.log(this.numDJArr,this.arrLabelDJ);for(var t=0;t<this.arrLabelDJ.length;t++)this.arrLabelDJ[t].string=this.numDJArr[t]},r.start=function(){this.bottomX=-258,this.numLevel=0,this.moveOutY=200,this.gameData=this.node.getComponent(C),this.numDJArr=[3,3,3,3],this.audioSource=this.node.getComponent(d),this.init(),f.on(b.EventType.TOUCH_START,this.touchStartFn,this),f.on(b.EventType.TOUCH_END,this.touchEndFn,this)},r.init=function(){this.curTouchEndNum=-1,this.gameStatus=0,this.layerOver.active=!1,this.curTouchStartNum=-1,this.preBlocks.removeAllChildren(),this.blocksBottom.removeAllChildren(),this.createBlocks(),this.btn3Fn(),this.isTwoBlockIntersect(),this.refreshLevel(),this.refreshDJNum(),this.toast.scale=new g(0,0,0)},r.showToast=function(t){this.toast.getChildByName("text").getComponent(c).string=t,m(this.toast).to(.1,{scale:new g(1,1,1)}).delay(3).to(.1,{scale:new g(0,0,0)}).start()},r.update=function(t){},o}(k)).prototype,"preBlocks",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=o(N.prototype,"preBlock",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=o(N.prototype,"blocksBottom",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=o(N.prototype,"levelLabel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=o(N.prototype,"arrLabelDJ",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=o(N.prototype,"layerOver",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=o(N.prototype,"toast",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=o(N.prototype,"arrAudio",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),J=N))||J));r._RF.pop()}}}));

System.register("chunks:///_virtual/gameData.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,a,o;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy,a=e._decorator,o=e.Component}],execute:function(){var y;r._RF.push({},"ac9e11ipQ1ERaK0W3SYGgFU","gameData",void 0);var n=a.ccclass;a.property,e("gameData",n("gameData")(y=function(e){function r(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).arrPosLevel=void 0,t.arrTypeyLevel=void 0,t}t(r,e);var a=r.prototype;return a.start=function(){this.arrTypeyLevel=[4],this.arrPosLevel=[[{x:0,y:295.863},{x:0,y:249.635},{x:160,y:295.863},{x:160,y:249.635},{x:-160,y:295.863},{x:-160,y:249.635},{x:0,y:117.883},{x:0,y:71.655},{x:160,y:117.883},{x:160,y:71.655},{x:-160,y:117.883},{x:-160,y:71.655},{x:0,y:-69.342},{x:0,y:-80.899},{x:160,y:-69.342},{x:160,y:-80.899},{x:-160,y:-69.342},{x:-160,y:-80.899}]]},a.update=function(e){},r}(o))||y);r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Block.ts","./game.ts","./gameData.ts"],(function(){"use strict";return{setters:[null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});